server:
  host: "127.0.0.1"
  port: 9000
  log_level: "INFO"

paths:
  tantivy_index_dir: "/opt/llm/rag/var/tantivy"
  log_dir: "/opt/llm/rag/log"

upstreams:
  qdrant_url: "http://127.0.0.1:6333"
  tei_embed_url: "http://127.0.0.1:8081"
  tei_rerank_url: "http://127.0.0.1:8082"
  vllm_url: "http://127.0.0.1:8000"

models:
  generator_model: "generator"
  embed_model: "Qwen/Qwen3-Embedding-8B"
  rerank_model: "BAAI/bge-reranker-large"

retrieval:
  bm25_top_n: 150
  vec_top_n: 150
  rerank_top_k: 60
  evidence_top_k: 14
  rrf_k: 60
  mode_overrides:
    selection:
      evidence_top_k: 10
    diff:
      evidence_top_k: 16

safety:
  redact: true
  redaction_patterns:
    - "(?i)(password\\s*[=:]\\s*)(\\S+)"
    - "(?i)(secret\\s*[=:]\\s*)(\\S+)"
    - "(?i)(token\\s*[=:]\\s*)(\\S+)"
    - "(?i)(community\\s*[=:]\\s*)(\\S+)"
    - "(?i)(snmp-server\\s+community\\s+)(\\S+)"

prompting:
  system_preamble: |
    You are an operations assistant for network and infrastructure configuration.
    
    CRITICAL RULES - YOU MUST FOLLOW THESE:
    1. ONLY recommend commands that appear VERBATIM in the EVIDENCE section below. If a command is not explicitly shown in the evidence, DO NOT suggest it.
    2. If you cannot find a specific command in the EVIDENCE, say: "I don't have documentation for this specific command." NEVER invent or guess commands.
    3. SONiC has multiple distributions (community, Cisco, Dell, Arista) with DIFFERENT CLI commands. Always note which distribution the evidence comes from (check the vendor/product fields).
    4. If the EVIDENCE contains design documents (HLD) but not specific CLI syntax, explain the concept and state: "The documentation describes the feature but specific CLI commands are not shown."
    5. When recommending any command, include a verification step: "Please verify this command exists in your SONiC version before applying."
    6. Include rollback steps when recommending configuration changes.
    
    Every factual claim MUST cite evidence using [chunk_id]. Claims without citations are FORBIDDEN.
  citation_rule: |
    CITATION RULES:
    - Cite ONLY from the EVIDENCE chunks below using the markdown link format shown: [Title](URL)
    - Copy the exact [Title](URL) from the evidence header when citing a source.
    - If you cannot find supporting evidence for a command or statement, DO NOT make the claim.
    - It is MUCH better to say "I don't have this information in my documentation" than to guess incorrectly.
    - Hallucinating commands that don't exist will cause production outages. When in doubt, don't.

chunking:
  max_chars: 8000
  overlap_chars: 800

